# Studio Registration Flow Diagram

## Visual Flow

```
┌─────────────────────────────────────────────────────────────────┐
│                                                                 │
│  USER CLICKS "REGISTER STUDIO"                                  │
│                                                                 │
└────────────────────────┬────────────────────────────────────────┘
                         │
                         ▼
                ┌────────────────────┐
                │  Dialog Opens      │
                │  (Sheet on mobile) │
                └────────┬───────────┘
                         │
                         ▼
┌────────────────────────────────────────────────────────────────┐
│                     STEP 0: WELCOME                            │
│                                                                │
│  ┌────────────┐                                                │
│  │    Icon    │  Let's set up your studio profile             │
│  └────────────┘                                                │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ 🏢 Studio Details                            │             │
│  │    Tell us about your wellness studio        │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ 📍 Location                                  │             │
│  │    Where clients can find you                │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ 📞 Contact Info                              │             │
│  │    How clients can reach you                 │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │           [ Get Started ]                    │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  Takes about 2-3 minutes                                       │
└────────────────────┬───────────────────────────────────────────┘
                     │ Click "Get Started"
                     ▼
┌────────────────────────────────────────────────────────────────┐
│  STEP 1: BASIC INFO                      Progress: ● ○ ○       │
│  ← Back                                           Close ✕      │
│                                                                │
│  Studio Information                                            │
│  Tell us about your wellness studio                            │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Studio Name *                                │             │
│  │ e.g., Serenity Wellness Studio               │             │
│  └──────────────────────────────────────────────┘             │
│  This will be displayed to clients     0/100                   │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Description *                                │             │
│  │ Describe your studio...                      │             │
│  │                                              │             │
│  │                                              │             │
│  └──────────────────────────────────────────────┘             │
│  Highlight your specialties             0/500                  │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │              [ Continue ]                    │             │
│  └──────────────────────────────────────────────┘             │
└────────────────────┬───────────────────────────────────────────┘
                     │ Click "Continue"
                     ▼
┌────────────────────────────────────────────────────────────────┐
│  STEP 2: ADDRESS                         Progress: ● ● ○       │
│  ← Back                                           Close ✕      │
│                                                                │
│  Studio Location                                               │
│  Where clients can find you                                    │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Street Address *                             │             │
│  │ 123 Main Street                              │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Address Line 2 (Optional)                    │             │
│  │ Suite, Unit, Building, Floor                 │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ City *                                       │             │
│  │ San Francisco                                │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────┐  ┌──────────────────────┐               │
│  │ State/Province * │  │ Postal Code *        │               │
│  │ CA               │  │ 94102                │               │
│  └──────────────────┘  └──────────────────────┘               │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Country *                                    │             │
│  │ United States                                │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │              [ Continue ]                    │             │
│  └──────────────────────────────────────────────┘             │
└────────────────────┬───────────────────────────────────────────┘
                     │ Click "Continue"
                     ▼
┌────────────────────────────────────────────────────────────────┐
│  STEP 3: CONTACT                         Progress: ● ● ●       │
│  ← Back                                           Close ✕      │
│                                                                │
│  Contact Information                                           │
│  How clients can reach you                                     │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Phone Number *                               │             │
│  │ (555) 123-4567                               │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Email Address *                              │             │
│  │ contact@studio.com                           │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ Website (Optional)                           │             │
│  │ https://www.yourstudio.com                   │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │        [ Complete Registration ]             │             │
│  └──────────────────────────────────────────────┘             │
└────────────────────┬───────────────────────────────────────────┘
                     │ Server Action: registerStudio()
                     │
                     ▼
              ┌──────────────┐
              │   Database   │
              │              │
              │  - Studio    │  ┐
              │  - Ownership │  │ Transaction
              │  - Role      │  ┘
              └──────┬───────┘
                     │ Success
                     ▼
┌────────────────────────────────────────────────────────────────┐
│  STEP 4: SUCCESS                                               │
│                                             Close ✕            │
│                                                                │
│  ┌────────────┐                                                │
│  │     ✓      │  Welcome to Massava!                          │
│  └────────────┘  Serenity Wellness Studio has been            │
│                  successfully registered                       │
│                                                                │
│  What's next?                                                  │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ 📅 Add Services                              │             │
│  │    Create your service offerings and pricing │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │ 📊 Customize Your Profile                    │             │
│  │    Add photos and complete your profile      │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │        [ Add Your First Service ]            │             │
│  └──────────────────────────────────────────────┘             │
│                                                                │
│  ┌──────────────────────────────────────────────┐             │
│  │         [ Go to Dashboard ]                  │             │
│  └──────────────────────────────────────────────┘             │
└────────────────────────────────────────────────────────────────┘
```

## State Flow

```
┌─────────────────┐
│  Initial State  │
│  step: 0        │
│  formData: {}   │
└────────┬────────┘
         │
         ▼
┌─────────────────────────────────────┐
│  Step Navigation                    │
│                                     │
│  Step 0 → Step 1 → Step 2 → Step 3 │
│    ↑        ↑        ↑        ↑    │
│    └────────┴────────┴────────┘    │
│         Back Button                 │
└────────────────┬────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────┐
│  Form Data Updates                  │
│                                     │
│  Step 1: UPDATE_BASIC_INFO          │
│  Step 2: UPDATE_ADDRESS             │
│  Step 3: UPDATE_CONTACT             │
└────────────────┬────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────┐
│  Server Action                      │
│                                     │
│  SET_SUBMITTING(true)               │
│  registerStudio(completeData)       │
│  ↓                                  │
│  Success: SET_STUDIO_ID, Step 4     │
│  Error: SET_ERRORS                  │
│  ↓                                  │
│  SET_SUBMITTING(false)              │
└────────────────┬────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────┐
│  Dialog Close                       │
│                                     │
│  RESET (all state cleared)          │
└─────────────────────────────────────┘
```

## Validation Flow

```
┌──────────────┐
│ User Input   │
└──────┬───────┘
       │
       ▼
┌──────────────────┐
│ onChange Handler │
│ (Update state)   │
└──────┬───────────┘
       │
       ▼
┌──────────────────┐     ┌─────────────┐
│ onBlur Handler   │────▶│ Zod Validate│
└──────┬───────────┘     └─────┬───────┘
       │                       │
       │                       ▼
       │              ┌─────────────────┐
       │              │ Valid: Clear    │
       │              │ Error           │
       │              └─────────────────┘
       │                       │
       │                       ▼
       │              ┌─────────────────┐
       │              │ Invalid: Show   │
       │              │ Error Message   │
       │              └─────────────────┘
       ▼
┌──────────────────┐
│ Continue/Submit  │
│ Button           │
└──────┬───────────┘
       │
       ▼
┌──────────────────┐     ┌─────────────┐
│ onClick Handler  │────▶│ Zod Validate│
└──────┬───────────┘     │ All Fields  │
       │                 └─────┬───────┘
       │                       │
       │ Valid                 │ Invalid
       ▼                       ▼
┌──────────────┐     ┌────────────────┐
│ Next Step or │     │ Show Errors +  │
│ Submit       │     │ Mark All       │
│              │     │ Touched        │
└──────────────┘     └────────────────┘
```

## Error Handling Flow

```
┌─────────────────┐
│ Server Action   │
│ registerStudio()│
└────────┬────────┘
         │
         ├─────────────────┐
         │                 │
         ▼                 ▼
   ┌──────────┐      ┌──────────┐
   │ Success  │      │  Error   │
   └────┬─────┘      └────┬─────┘
        │                 │
        │                 ├───────────────┐
        │                 │               │
        ▼                 ▼               ▼
   ┌──────────┐    ┌──────────┐   ┌──────────┐
   │ Set ID   │    │ Auth     │   │ Validation│
   │ Go Step 4│    │ Error    │   │ Error     │
   └──────────┘    └────┬─────┘   └────┬──────┘
                        │              │
                        │              │
                        ▼              ▼
                   ┌────────────────────┐
                   │ SET_ERRORS         │
                   │ Display inline     │
                   └────────────────────┘
```

## Responsive Behavior

```
┌─────────────────────────────────────┐
│  Viewport Width                     │
└────────┬────────────────────────────┘
         │
         ├──────────────────┬──────────────────┐
         │                  │                  │
    < 768px          >= 768px           Resize
         │                  │                  │
         ▼                  ▼                  │
   ┌──────────┐      ┌──────────┐             │
   │  Sheet   │      │  Dialog  │             │
   │          │      │          │             │
   │ h-[95vh] │      │ max-w-   │             │
   │ rounded- │      │ [500px]  │             │
   │ t-3xl    │      │          │             │
   │ bottom   │      │ centered │             │
   └────┬─────┘      └────┬─────┘             │
        │                 │                   │
        └─────────┬───────┘                   │
                  │                           │
                  ▼                           │
         ┌─────────────────┐                  │
         │ State Preserved │◀─────────────────┘
         └─────────────────┘
```

## Legend

- `●` Active/Completed Step
- `○` Inactive/Upcoming Step
- `*` Required Field
- `✕` Close Button
- `←` Back Button
- `→` Next/Continue Action
- `▼` Flow Direction
- `┌─┐` UI Container
